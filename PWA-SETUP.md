# ุฑุงูููุง PWA - Progressive Web App

## ๐ฏ ูฺฺฏโูุง ูพุงุฏูโุณุงุฒ ุดุฏู

### โ ุชูุธูุงุช ุงูุฌุงู ุดุฏู

1. **ูุตุจ next-pwa**: ูพฺฉุฌ next-pwa ุจุฑุง ุชุจุฏู Next.js ุจู PWA
2. **ูุงู Manifest**: `/public/manifest.json` ุจุง ุชูุธูุงุช ูุงุฑุณ ู RTL
3. **ุขฺฉููโูุง**: ุขฺฉููโูุง 192x192 ู 512x512 ุจุฑุง ููุงุด ุฏุฑ ุตูุญู ุงุตู
4. **Service Worker**: ฺฉุด ุงุณุชุฑุงุชฺ ุจุฑุง ูููุชโูุงุ ุชุตุงูุฑุ API ู... 
5. **Metadata**: ุชูุธูุงุช PWA ุฏุฑ `layout.tsx`
6. **ฺฉุงููพูููุช ูุตุจ**: ูพุงูพโุขูพ ุฎูุฏฺฉุงุฑ "Add to Home Screen" ุจุฑุง ููุจุงู

---

## ๐ฑ ูุญูู ฺฉุงุฑ

### Android / Chrome
- ูพุณ ุงุฒ ูุฑูุฏ ุจู ุณุงุชุ ูพุณ ุงุฒ 3 ุซุงูู ูพุงูพโุขูพ ูุตุจ ููุงุด ุฏุงุฏู ูโุดูุฏ
- ุจุง ฺฉูฺฉ ุฑู "ูุตุจ ุงูพูฺฉุดู"ุ PWA ุจู ุตูุญู ุงุตู ฺฏูุด ุงุถุงูู ูโุดูุฏ
- ุงูพูฺฉุดู ุจู ุตูุฑุช Full Screen ุจุฏูู ููุงุฑ ูุฑูุฑฺฏุฑ ุงุฌุฑุง ูโุดูุฏ

### iOS / Safari  
- ูพุณ ุงุฒ ูุฑูุฏ ุจู ุณุงุชุ ูพุงูพโุขูพ ุฑุงูููุง ูุตุจ ููุงุด ุฏุงุฏู ูโุดูุฏ
- ุฑุงูููุง ฺฏุงูโุจูโฺฏุงู ุจุฑุง ุงุณุชูุงุฏู ุงุฒ Share Button โ Add to Home Screen
- ูพุณ ุงุฒ ูุตุจุ ุงูพูฺฉุดู ูุงููุฏ ฺฉ ุงูพ Native ฺฉุงุฑ ูโฺฉูุฏ

### ูุงุจูุชโูุง ููุดููุฏ ูพุงูพโุขูพ
- โ ุชุดุฎุต ุฎูุฏฺฉุงุฑ iOS ู Android
- โ ููุงุด ูพุงูพโุขูพ ููุท ุจุฑุง ฺฉุงุฑุจุฑุงู ููุจุงู
- โ ุนุฏู ููุงุด ูพุงูพโุขูพ ุงฺฏุฑ ูุจูุงู ูุตุจ ุดุฏู ุจุงุดุฏ
- โ ุนุฏู ููุงุด ูุฌุฏุฏ ุชุง 7 ุฑูุฒ ูพุณ ุงุฒ Dismiss ฺฉุฑุฏู
- โ ุฐุฎุฑู ูุถุนุช ุฏุฑ localStorage

---

## ๐๏ธ ูุงูโูุง ุงุฌุงุฏ ุดุฏู

### `/public/manifest.json`
```json
{
  "name": "ุจุงุดฺฏุงู ูุดุชุฑุงู",
  "short_name": "ุจุงุดฺฏุงู ูุดุชุฑุงู",
  "display": "standalone",
  "orientation": "portrait",
  "lang": "fa",
  "dir": "rtl",
  ...
}
```

### `/public/icon-192x192.png` ู `/public/icon-512x512.png`
- ุขฺฉููโูุง ุงูพูฺฉุดู ุจุฑุง ููุงุด ุฏุฑ ุตูุญู ุงุตู
- ุงุฌุงุฏ ุดุฏู ุงุฒ `Background.png`

### `/src/components/InstallPWA.tsx`
- ฺฉุงููพูููุช React ุจุฑุง ููุงุด ูพุงูพโุขูพ ูุตุจ
- ุชุดุฎุต ุฎูุฏฺฉุงุฑ ุณุณุชูโุนุงูู ู ููุงุด UI ููุงุณุจ
- ูุฏุฑุช BeforeInstallPrompt API ุจุฑุง Android

### `/next.config.ts`
- ุชูุธูุงุช next-pwa
- Cache Strategy ุจุฑุง ุงููุงุน ูุงูโูุง
- Runtime Caching ุจุฑุง ุจูููโุณุงุฒ

---

## ๐ง Cache Strategy

### ูููุชโูุง (Google Fonts)
- **ุงุณุชุฑุงุชฺ**: CacheFirst
- **ูุฏุช**: 1 ุณุงู
- **ุฏูู**: ูููุชโูุง ุชุบุฑ ููโฺฉููุฏ

### ุชุตุงูุฑ (jpg, png, svg, ...)
- **ุงุณุชุฑุงุชฺ**: StaleWhileRevalidate  
- **ูุฏุช**: 24 ุณุงุนุช
- **ุฏูู**: ููุงุด ุณุฑุน + ุขูพุฏุช ุฏุฑ ูพุณโุฒููู

### API Calls
- **ุงุณุชุฑุงุชฺ**: NetworkFirst
- **ูุฏุช**: 24 ุณุงุนุช
- **Timeout**: 10 ุซุงูู
- **ุฏูู**: ุฏุงุฏู ุชุงุฒู ุงูููุช ุฏุงุฑุฏุ ุฏุฑ ุตูุฑุช ุขููุงู ุงุฒ ฺฉุด ุงุณุชูุงุฏู ุดูุฏ

### ูุงูโูุง JS/CSS
- **ุงุณุชุฑุงุชฺ**: StaleWhileRevalidate
- **ูุฏุช**: 24 ุณุงุนุช
- **ุฏูู**: ุจุงุฑฺฏุฐุงุฑ ุณุฑุน + ุขูพุฏุช ุฏุฑ ูพุณโุฒููู

---

## ๐งช ุชุณุช PWA

### ุจุฑุฑุณ ฺฉุงูู PWA
1. ุฏุฑ Chrome DevTools โ Application โ Manifest ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. Service Workers ุฑุง ุฏุฑ Application โ Service Workers ฺฺฉ ฺฉูุฏ
3. Lighthouse โ PWA Audit ุฑุง ุงุฌุฑุง ฺฉูุฏ

### ุชุณุช ููุจุงู
```bash
# ุงุฌุฑุง ุณุฑูุฑ local ุจุง HTTPS (ุงูุฒุงู ุจุฑุง PWA)
npm run dev

# ุง deploy ุฑู ุณุฑูุฑ production ุจุง SSL
```

### ุชุณุช ูุตุจ
1. ุณุงุช ุฑุง ุฏุฑ Chrome/Safari ููุจุงู ุจุงุฒ ฺฉูุฏ
2. ููุชุธุฑ ูพุงูพโุขูพ ูุตุจ ุจูุงูุฏ (3 ุซุงูู)
3. ุฑู "ูุตุจ" ุง "Add to Home Screen" ฺฉูฺฉ ฺฉูุฏ
4. ุขฺฉูู ุฑุง ุฏุฑ ุตูุญู ุงุตู ูพุฏุง ฺฉูุฏ
5. ุงูพูฺฉุดู ุฑุง ุจุงุฒ ฺฉูุฏ (ุจุงุฏ Full Screen ุจุงุดุฏ)

---

## ๐ ุจูุจูุฏูุง Performance

### ูุจู ุงุฒ PWA
- ุจุงุฑฺฏุฐุงุฑ ฺฉุงูู ุฏุฑ ูุฑ ุจุงุฒุฏุฏ
- ูุงุฒ ุจู ุงูุชุฑูุช ุจุฑุง ููู ูุงูโูุง
- ุจุงุฒ ุดุฏู ุฏุฑ ูุฑูุฑฺฏุฑ ุจุง ููุงุฑ ุขุฏุฑุณ

### ุจุนุฏ ุงุฒ PWA
- โ ูุงูโูุง ุงุฒ ฺฉุด ุจุงุฑฺฏุฐุงุฑ ูโุดููุฏ (ุณุฑุนโุชุฑ)
- โ ฺฉุงุฑ ุขููุงู (ุจุฑุง ุตูุญุงุช ุจุงุฒุฏุฏ ุดุฏู)
- โ Full Screen ุจุฏูู ููุงุฑ ูุฑูุฑฺฏุฑ
- โ ุขฺฉูู ุฏุฑ ุตูุญู ุงุตู
- โ ุงุญุณุงุณ Native App

---

## ๐ Deploy ู Production

### ูุงูโูุง auto-generated
ุงู ูุงูโูุง ุชูุณุท next-pwa ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุฑ build ุงุฌุงุฏ ูโุดููุฏ:
- `/public/sw.js` - Service Worker
- `/public/workbox-*.js` - Workbox Runtime
- ู ูุงูโูุง map ุขูโูุง

**ูฺฉุชู**: ุงู ูุงูโูุง ุฏุฑ `.gitignore` ุงุถุงูู ุดุฏูโุงูุฏ

### Build ุจุฑุง Production
```bash
npm run build
npm start
```

Service Worker ููุท ุฏุฑ production ูุนุงู ุงุณุช (`NODE_ENV=production`)

---

## โ๏ธ ุชูุธูุงุช ุงุฎุชุงุฑ

### ุชุบุฑ ุฑูฺฏ Theme
ุฏุฑ `/public/manifest.json`:
```json
"theme_color": "#2563eb"  // ุขุจ
"background_color": "#ffffff"  // ุณูุฏ
```

### ุชุบุฑ ูุงู ุงูพูฺฉุดู
ุฏุฑ `/public/manifest.json`:
```json
"name": "ูุงู ฺฉุงูู",
"short_name": "ูุงู ฺฉูุชุงู"
```

### ุบุฑูุนุงู ฺฉุฑุฏู ูพุงูพโุขูพ ูุตุจ
ุฏุฑ `/src/app/panel/b/[slug]/c/home/page.tsx`:
```tsx
// ุฎุท ุฒุฑ ุฑุง comment ฺฉูุฏ
<InstallPWA />
```

### ุชุบุฑ ุฒูุงู ููุงุด ูพุงูพโุขูพ
ุฏุฑ `/src/components/InstallPWA.tsx`:
```tsx
// ุฎุท 48 - ุงุฒ 3000 ุจู ุนุฏุฏ ุฏูุฎูุงู (ููโุซุงูู)
setTimeout(() => {
  setShowInstallPrompt(true);
}, 3000);  // 3 ุซุงูู
```

### ุชุบุฑ ูุฏุช Dismiss
ุฏุฑ `/src/components/InstallPWA.tsx`:
```tsx
// ุฎุท 27 - ุงุฒ 7 ุจู ุชุนุฏุงุฏ ุฑูุฒ ุฏูุฎูุงู
if (daysSinceDismissed < 7) {
  return;
}
```

---

## ๐ Troubleshooting

### ูพุงูพโุขูพ ููุงุด ุฏุงุฏู ููโุดูุฏ
- ุจุฑุฑุณ ฺฉูุฏ ฺฉู ูุจูุงู dismiss ูฺฉุฑุฏู ุจุงุดุฏ (localStorage ุฑุง ูพุงฺฉ ฺฉูุฏ)
- ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุงูพูฺฉุดู ูุตุจ ูุดุฏู ุจุงุดุฏ
- Console ูุฑูุฑฺฏุฑ ุฑุง ุจุฑุง ุฎุทุงูุง ุจุฑุฑุณ ฺฉูุฏ

### Service Worker ุซุจุช ููโุดูุฏ
- ูุทูุฆู ุดูุฏ ุฏุฑ production mode ูุณุชุฏ
- HTTPS ูุนุงู ุจุงุดุฏ (ุง localhost)
- Cache ูุฑูุฑฺฏุฑ ุฑุง ูพุงฺฉ ฺฉูุฏ

### ุขฺฉูู ููุงุด ุฏุงุฏู ููโุดูุฏ
- ูุงูโูุง `icon-*.png` ุฏุฑ `/public` ูุฌูุฏ ุฏุงุดุชู ุจุงุดูุฏ
- ูุณุฑ ุฏุฑ `manifest.json` ุตุญุญ ุจุงุดุฏ
- ูุฑูุฑฺฏุฑ ุฑุง refresh ฺฉูุฏ

### ูพุณ ุงุฒ ูุตุจุ ุงูพูฺฉุดู ุจุงุฒ ููโุดูุฏ
- `start_url` ุฏุฑ manifest ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ูุทูุฆู ุดูุฏ ุณุฑูุณ ุฏุฑ ุฏุณุชุฑุณ ุงุณุช
- Cache ู ุฏุงุฏูโูุง ุณุงุช ุฑุง ูพุงฺฉ ฺฉูุฏ ู ุฏูุจุงุฑู ูุตุจ ฺฉูุฏ

---

## ๐ ููุงุจุน

- [Next PWA Documentation](https://github.com/shadowwalker/next-pwa)
- [Web.dev PWA](https://web.dev/progressive-web-apps/)
- [MDN - Progressive Web Apps](https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps)
- [Google Workbox](https://developers.google.com/web/tools/workbox)

---

## โ Checklist ูุตุจ ูููู

- [x] next-pwa ูุตุจ ุดุฏู
- [x] manifest.json ุงุฌุงุฏ ุดุฏู
- [x] ุขฺฉููโูุง ุงุฌุงุฏ ุดุฏู
- [x] next.config.ts ูพฺฉุฑุจูุฏ ุดุฏู
- [x] metadata ุฏุฑ layout.tsx ุงุถุงูู ุดุฏู
- [x] InstallPWA ฺฉุงููพูููุช ุงุฌุงุฏ ุดุฏู
- [x] InstallPWA ุจู ุตูุญู ูุดุชุฑ ุงุถุงูู ุดุฏู
- [x] .gitignore ุขูพุฏุช ุดุฏู
- [x] README ุขูพุฏุช ุดุฏู

**ููู ฺุฒ ุขูุงุฏู ุงุณุช! ๐**

